{"version":3,"sources":["components/Header.tsx","icons/LoadingIcon.tsx","components/InputForm.tsx","components/Main.tsx","hooks/useStateWithHistory.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Style","styled","header","Header","LoadingIcon","xmlns","xmlnsXlink","width","height","viewBox","preserveAspectRatio","transform","cx","cy","r","fill","fillOpacity","attributeName","type","begin","values","keyTimes","dur","repeatCount","form","InputForm","title","value","onChange","onSubmit","placeholder","onClick","main","Main","containerRef","useRef","useState","inputValue","setInputValue","capacity","setValue","historyRef","pointerRef","set","useCallback","v","resolvedValue","current","length","splice","push","shift","back","forward","go","index","history","pointer","useStateWithHistory","result","setResult","isLoading","setIsLoading","isError","setIsError","onSubmitHandler","e","a","preventDefault","trim","console","error","apiResult","key","Date","getTime","padStart","slice","b","Math","random","info","useEffect","querySelector","focus","ref","className","target","JSON","stringify","map","join","div","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3f057026.chunk.js","sourcesContent":["import styled from '@emotion/styled';\r\nimport React from 'react';\r\n\r\nconst Style = styled.header`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 1.2rem 1.6rem;\r\n  box-shadow: 0 1px 0 0 #e5e5e5;\r\n`;\r\n\r\nfunction Header() {\r\n  return (\r\n    <Style>\r\n      <h2>♻️ simple convert input</h2>\r\n    </Style>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\n// icon from https://loading.io/\r\nfunction LoadingIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n      width=\"200px\"\r\n      height=\"200px\"\r\n      viewBox=\"0 0 100 100\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n    >\r\n      <g transform=\"translate(50,50)\">\r\n        <g transform=\"rotate(0)\">\r\n          <circle cx=\"0\" cy=\"0\" r=\"12\" fill=\"#1d3f72\" fillOpacity=\"1\">\r\n            <animateTransform\r\n              attributeName=\"transform\"\r\n              type=\"scale\"\r\n              begin=\"0s\"\r\n              values=\"0.01 0.01;1 1\"\r\n              keyTimes=\"0;1\"\r\n              dur=\"1s\"\r\n              repeatCount=\"indefinite\"\r\n            />\r\n            <animate\r\n              attributeName=\"fill-opacity\"\r\n              keyTimes=\"0;1\"\r\n              dur=\"1s\"\r\n              repeatCount=\"indefinite\"\r\n              values=\"1;0\"\r\n              begin=\"0s\"\r\n            />\r\n          </circle>\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default LoadingIcon;\r\n","import styled from '@emotion/styled';\r\nimport React from 'react';\r\n\r\nconst Style = styled.form`\r\n  display: flex;\r\n  place-items: center;\r\n  margin: 4em 0;\r\n\r\n  input,\r\n  button {\r\n    padding: 1rem 1.6rem;\r\n    outline: none;\r\n    background-color: transparent;\r\n    border: 1px solid hsl(0, 0%, 80%);\r\n    font-size: 1.4rem;\r\n    margin-top: 10px;\r\n  }\r\n\r\n  input {\r\n    width: 100%;\r\n\r\n    :focus {\r\n      border-color: #21dc6d;\r\n    }\r\n  }\r\n\r\n  button {\r\n    background-color: #21dc6d;\r\n    border-color: hsl(144, 93%, 49%);\r\n    color: white;\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  title: string;\r\n  value: string;\r\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  onSubmit: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n};\r\n\r\nfunction InputForm({ title, value, onChange, onSubmit }: Props) {\r\n  return (\r\n    <Style>\r\n      <input\r\n        type=\"text\"\r\n        value={value}\r\n        placeholder={title}\r\n        onChange={onChange}\r\n      />\r\n      <button type=\"submit\" onClick={onSubmit}>\r\n        Enter\r\n      </button>\r\n    </Style>\r\n  );\r\n}\r\n\r\nexport default InputForm;\r\n","import styled from '@emotion/styled';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport LoadingIcon from '../icons/LoadingIcon';\r\nimport InputForm from './InputForm';\r\nimport useStateWithHistory from 'hooks/useStateWithHistory';\r\n\r\nconst Style = styled.main`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4em;\r\n  place-items: center;\r\n  width: 100%;\r\n  min-height: 100%;\r\n  max-width: 1000px;\r\n  padding: 0 2rem;\r\n  margin: auto;\r\n\r\n  .input,\r\n  .result {\r\n    width: 100%;\r\n  }\r\n\r\n  .result {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    align-content: flex-start;\r\n    gap: 1rem;\r\n    overflow: hidden;\r\n    margin: 1rem 1.6rem;\r\n    padding: 1rem 1.6rem;\r\n    border: 1px solid;\r\n    border-color: green;\r\n  }\r\n\r\n  .history {\r\n    width: 100%;\r\n  }\r\n\r\n  .error {\r\n    font-style: italic;\r\n  }\r\n`;\r\n\r\ntype ApiResultType = {\r\n  key: string;\r\n  a: string;\r\n  b: number;\r\n};\r\n\r\nfunction Main() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [result, setResult, { history }] = useStateWithHistory<ApiResultType>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isError, setIsError] = useState<any>(false);\r\n\r\n  const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setInputValue(e.target.value);\r\n  };\r\n\r\n  const onSubmitHandler = async (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n    if (inputValue.trim().length < 1) {\r\n      console.error('can not be empty');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsError(false);\r\n      setIsLoading(true);\r\n\r\n      // const apiResult = await fetch(`{api endpoint}`).then((res) => res.json());\r\n      const apiResult: ApiResultType = {\r\n        key: `${new Date().getTime()}`,\r\n        a: inputValue.padStart(10, '*').slice(-10),\r\n        b: Math.random(),\r\n      };\r\n      console.info({ apiResult });\r\n\r\n      setIsLoading(false);\r\n      setResult(apiResult);\r\n    } catch (error) {\r\n      console.error({ error });\r\n      setIsError(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    containerRef.current\r\n      .querySelector<HTMLInputElement>('.input input')\r\n      ?.focus();\r\n  }, []);\r\n\r\n  return (\r\n    <Style ref={containerRef}>\r\n      <div className=\"input\">\r\n        <InputForm\r\n          title=\"your input\"\r\n          value={inputValue}\r\n          onChange={onChangeHandler}\r\n          onSubmit={onSubmitHandler}\r\n        />\r\n      </div>\r\n\r\n      {isLoading && <LoadingIcon />}\r\n\r\n      <div className=\"error\">{isError && JSON.stringify(isError, null, 2)}</div>\r\n\r\n      {!isLoading && !isError && result && (\r\n        <div className=\"result\">\r\n          <div className=\"result-header\">result header</div>\r\n          <div className=\"result-body\">result body</div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"history\">\r\n        {history.map(({ a, b, key }) => (\r\n          <div key={key}>{[a, b].join(' / ')}</div>\r\n        ))}\r\n      </div>\r\n    </Style>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import { useCallback, useRef, useState } from 'react';\r\n\r\ntype RT<T> = [\r\n  T | undefined,\r\n  (v: T) => void,\r\n  {\r\n    history: T[];\r\n    pointer: number;\r\n    back: () => void;\r\n    forward: () => void;\r\n    go: (index: any) => void;\r\n  },\r\n];\r\n\r\nexport default function useStateWithHistory<T>({ capacity = 10 } = {}): RT<T> {\r\n  const [value, setValue] = useState<T>();\r\n  const historyRef = useRef<T[]>([]);\r\n  const pointerRef = useRef(0);\r\n\r\n  const set = useCallback(\r\n    (v) => {\r\n      const resolvedValue = typeof v === 'function' ? v(value) : v;\r\n      if (historyRef.current[pointerRef.current] !== resolvedValue) {\r\n        if (pointerRef.current < historyRef.current.length - 1) {\r\n          historyRef.current.splice(pointerRef.current + 1);\r\n        }\r\n        historyRef.current.push(resolvedValue);\r\n\r\n        while (historyRef.current.length > capacity) {\r\n          historyRef.current.shift();\r\n        }\r\n        pointerRef.current = historyRef.current.length - 1;\r\n      }\r\n      setValue(resolvedValue);\r\n    },\r\n    [capacity, value],\r\n  );\r\n\r\n  const back = useCallback(() => {\r\n    if (pointerRef.current <= 0) return;\r\n    pointerRef.current -= 1;\r\n    setValue(historyRef.current[pointerRef.current]);\r\n  }, []);\r\n\r\n  const forward = useCallback(() => {\r\n    if (pointerRef.current >= historyRef.current.length - 1) return;\r\n    pointerRef.current += 1;\r\n    setValue(historyRef.current[pointerRef.current]);\r\n  }, []);\r\n\r\n  const go = useCallback((index) => {\r\n    if (index < 0 || index > historyRef.current.length - 1) return;\r\n    pointerRef.current = index;\r\n    setValue(historyRef.current[pointerRef.current]);\r\n  }, []);\r\n\r\n  return [\r\n    value,\r\n    set,\r\n    {\r\n      history: historyRef.current,\r\n      pointer: pointerRef.current,\r\n      back,\r\n      forward,\r\n      go,\r\n    },\r\n  ];\r\n}\r\n","import styled from '@emotion/styled';\r\nimport React from 'react';\r\nimport Header from 'components/Header';\r\nimport Main from 'components/Main';\r\n\r\nconst Style = styled.div`\r\n  display: grid;\r\n  grid-template-rows: auto 1fr auto;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst App = () => (\r\n  <Style>\r\n    <Header />\r\n    <Main />\r\n  </Style>\r\n);\r\n\r\nexport default App;\r\n","/* eslint-disable */\r\nimport { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}